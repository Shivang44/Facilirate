<form action="/facility" method="POST">
    <!-- TODO:
    - Validate all these things
    - Make the building name and room number auto complete
    - Get facility types via model and make facility type a drop down
    - Fix look and feel to match home page by using bootstrap
    -->
    <label class="input-header">
        Enter the building name
    </label>
    <%= text_field_tag(:building, "", class:"form-control") %>

    <br />

    <label class="input-header">
        Enter the room number
    </label>
    <%= text_field_tag(:room, "", class:"form-control") %>

    <br />

    <label class="input-header">
        Select the facility type
    </label>
    <%= select_tag(:facility, options_for_select(@facilitytypes), prompt: "Select a Facility Type") %>

    <br />
    <button type="submit" class="btn btn-default">Submit</button>
</form>

<%= javascript_tag do %>

var buildingAutoComplete = new autoComplete({
    selector: document.getElementById("building"),
    minChars: 2,
    source: function(term, suggest){
        term = term.toLowerCase();
        var choices = <%= raw @buildings.to_json %>
        var matches = [];
        for (i=0; i< choices.length; i++)
            if (~choices[i].toLowerCase().indexOf(term)) matches.push(choices[i]);
        suggest(matches);
    }
});
<% end %>
