
<div class='static'>
    &nbsp;
</div>
    <div class='return'>
        <%= link_to("Return Home", '/home/index', class:"btn btn-default button-topright") %>
    </div>
<div class='profileInformation'>
<div class="container-fluid">

<%= render "layouts/searchBar" %>
<hr class='results'>
<%= render :partial => "layouts/sortToolBar", :object => "allRooms" %>
<div class="row main">
    <table class="table table-hover table-bordered" id="mytable">
    <thead class="thead-dark">
    <tr>
    <th scope="col">Room</th>
    <th data-sort="float" scope="col">Average Rating</th>
    <th scope="col">Building</th>
    <th scope="col">Facility Type</th>
    </tr>
    </thead>
    <tbody>
    <% @rooms.each do |room|%>
    <tr class="rowselect" data-roomId= <%=room.id%> >
    <% buildingName = Building.find(room.building_id).name %>
    <%# <% faciltyName = FacilityType.find(room.facilitytype_id).ftype%> 
        <td>
        <%=room.roomNum%>
        </td>
        <td>
        <%=room.avgRating%>
        </td>
        <td>
        <%=buildingName%>
        </td>
        <td>
        null
        </td>
    </tr>
    <%end%>
    </tbody>

</table>
</div>
</div>
</div>

  <%# $.ajax("/users/render_read");  ajax call need to call appropriate method%>
<script>
    $(".rowselect").click(function() {
        var roomId = $(this).attr('data-roomId');
        window.location.href = "/room_page/roomInfo"+"?id"+ roomId;
    });
    $("#sorter a").click(function(){
         var $table = $("#mytable").stupidtable();
         console.log($table);
         var $th_to_sort = $table.find("thead th").eq(1);
         console.log($th_to_sort);

        let ascend = this.innerText.indexOf("Low-High")>0;

        if(ascend){
            $table.stupidsort('asc');
            console.log("asc");
        }else{
             $table.stupidsort('desc'); 
             console.log("desc");
        }
    }); 
   
</script>
